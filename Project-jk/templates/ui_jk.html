<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="stylesheet" href="../static/css/ui_jk.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon"></div>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="#" class="nav-link active">
                    <span class="nav-icon">ğŸ </span>
                    Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="location.href='/map'">
                    <span class="nav-icon">ğŸ«</span>
                    ë†ì—…êµìœ¡ê¸°ê´€
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="location.href='/flowershop'">
                    <span class="nav-icon">ğŸŒ¼</span>
                    ê½ƒì§‘ ì§€ë„
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <span class="nav-icon">âš™ï¸</span>
                    Setting
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <span class="nav-icon">ğŸ”’</span>
                    Privacy
                </a>
            </li>
        </ul>

        <div class="bottom-controls">
            <div class="toggle-control">
                <span>ğŸŒ™ Light Mode</span>
                <div class="toggle-switch"></div>
            </div>
            <a href="#" class="withdraw-btn">
                <span>ğŸ’° Withdraw</span>
            </a>
            <button class="logout-btn">ğŸ“¤ Logout</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1 class="page-title">Thousand haniho</h1>
        </div>

        <div class="dashboard-grid">
            <div class="weather-card">
                <div class="weather-header">
                    <div class="weather-title">í˜„ì¬ ë‚ ì”¨</div>
                </div>

                <div class="metric-cards">
                    <div class="metric-card main">
                    </div>
                    <div class="metric-card two">
                        <h3>ê¸°ì˜¨ğŸŒ¡ï¸</h3>
                        <p>{{ weather_dict.temp_value }} Â°C</p>
                    </div>
                    <div class="metric-card blue">
                        <h3>ìŠµë„ğŸ’§</h3>
                        <p>{{ weather_dict.humi_value }} %</p>
                    </div>
                    <div class="metric-card orange">
                        <h3>1ì‹œê°„ ê°•ìˆ˜ëŸ‰ğŸŒ§ï¸</h3>
                        <p>{{ weather_dict.rain_value }} mm</p>
                    </div>
                    <div class="metric-card pink">
                        <h3>í’ì†ğŸ’¨</h3>
                        <p>{{ weather_dict.wind_value }} m/s</p>
                    </div>
                </div>
            </div>

            <!-- ì—¬ê¸°ì— íŒŒì´ì°¨íŠ¸ -->
            <div class="empty-card"></div>
            
            <div class="map-card">
                <h3>ë†ì—… êµìœ¡ê¸°ê´€ ì§€ë„</h3>
                <div id="map" style="width:100%; height:370px; border-radius:8px;"></div>
            </div>

            <div class="chart-card">
                <div class="chart-card-header">
                    <h3>ì‘ë¬¼ë³„ í™˜ê²½ í‰ê·  ê·¸ë˜í”„</h3>
                    <div id="regionSelector" style="margin-bottom:10px;">
                        <label for="region">ì§€ì—­ ì„ íƒ:</label>
                        <select id="region">
                            <option value="ì„œìš¸">ì„œìš¸</option>
                            <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                            <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                            <option value="ê´‘ì£¼">ê´‘ì£¼</option>
                            <option value="ì¸ì²œ">ì¸ì²œ</option>
                            <option value="ëŒ€ì „">ëŒ€ì „</option>
                        </select>
                    </div>
                </div>

                <div id="cropFilter" style="margin-bottom:10px;"></div>

                <canvas id="barChart"></canvas>
            </div>

            <div class="ranking-card">
                <div class="ranking-header">
                    <h2>ê°€ê²© ë°ì´í„°</h2>
                    <select id="ranking-category-select">
                        <option value="100">ì‹ëŸ‰ì‘ë¬¼</option>
                        <option value="200">ì±„ì†Œë¥˜</option>
                        <option value="300">íŠ¹ìš©ì‘ë¬¼</option>
                        <option value="400">ê³¼ì¼ë¥˜</option>
                        <option value="600">ìˆ˜ì‚°ë¬¼</option>
                    </select>
                </div>
                <div class="ranking-table-wrapper">
                    <table class="ranking-table">
                        <thead>
                            <tr>
                                <th data-column="rank">ë²ˆí˜¸</th>
                                <th data-column="name">ì‘ë¬¼ëª…</th>
                                <th data-column="price">ì†Œë§¤ê°€ê²©</th>
                                <th data-column="change">ë“±ë½ë¥ </th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


    </div>

    
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
    <script>
        // ëª¨ë“  nav-link ìš”ì†Œ ì„ íƒ
        const navLinks = document.querySelectorAll('.nav-link');

        // ê° ë§í¬ì— í´ë¦­ ì´ë²¤íŠ¸ ê±¸ê¸°
        navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault(); // ë§í¬ ì´ë™ ë§‰ê¸°

            // ëª¨ë“  ë§í¬ì—ì„œ active ì œê±°
            navLinks.forEach(item => item.classList.remove('active'));

            // í´ë¦­í•œ ë§í¬ì—ë§Œ active ì¶”ê°€
            this.classList.add('active');
        });
        });

        const toggle = document.querySelector('.toggle-switch');

        toggle.addEventListener('click', () => {
        toggle.classList.toggle('active');
        });
    </script>

    <!-- ì‘ë¬¼ë³„ í™˜ê²½ í‰ê·  ê·¸ë˜í”„ -->
    <script>
        // ğŸ‘‰ Flask í…œí”Œë¦¿ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const labels = {{ compare_dict.labels | tojson }};
        const tempData = {{ compare_dict.temp | tojson }};
        const humidData = {{ compare_dict.humid | tojson }};
        const solarData = {{ compare_dict.solar | tojson }};

        let selectedRegion = "ì„œìš¸";          // í˜„ì¬ ì„ íƒëœ ì§€ì—­
        let lastSelectedCropIndex = null;     // ë§ˆì§€ë§‰ìœ¼ë¡œ ì„ íƒëœ ì‘ë¬¼ ì¸ë±ìŠ¤

        // ğŸ‘‰ Chart.js ì°¨íŠ¸ ìƒì„±
        const ctx = document.getElementById('barChart').getContext('2d');
        const barChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'ì˜¨ë„_ë‚´ë¶€ (Â°C)',
                        backgroundColor: '#AED581',
                        data: tempData
                    },
                    {
                        label: 'ìƒëŒ€ìŠµë„_ë‚´ë¶€ (%)',
                        backgroundColor: '#4DB6AC',
                        data: humidData
                    },
                    {
                        label: 'ì¼ì‚¬ëŸ‰_ì™¸ë¶€ (W/mÂ²)',
                        backgroundColor: '#DCE775',
                        data: solarData
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                aspectRatio: 3,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        align: 'end'
                    }
                },
                layout: {
                    padding: {
                        top: 20,
                        right: 30,
                        bottom: 10,
                        left: 10
                    }
                }
            }
        });

        // ğŸ‘‰ ì§€ì—­ ì„ íƒ ì´ë²¤íŠ¸
        const regionSelector = document.getElementById("region");
        regionSelector.addEventListener("change", () => {
            selectedRegion = regionSelector.value;
            // ë§ˆì§€ë§‰ì— ì„ íƒëœ ì‘ë¬¼ì´ ìˆìœ¼ë©´ ë‹¤ì‹œ í•„í„°ë§
            if (lastSelectedCropIndex !== null) {
                filterChartByCrop(lastSelectedCropIndex);
            }
        });

        // ğŸ‘‰ í•„í„° ë²„íŠ¼ ì»¨í…Œì´ë„ˆ
        const filterContainer = document.getElementById('cropFilter');

        // ğŸ‘‰ ë²„íŠ¼ ìƒì„± ìœ í‹¸ í•¨ìˆ˜
        function createButton(label, onClick) {
            const btn = document.createElement('button');
            btn.textContent = label;
            btn.className = 'crop-button';  // ê³µí†µ í´ë˜ìŠ¤ ì§€ì •
            btn.addEventListener('click', onClick);
            return btn;
        }

        // ğŸ‘‰ "ì „ì²´ ë³´ê¸°" ë²„íŠ¼
        const allButton = createButton('ì „ì²´ ë³´ê¸°', () => {
            barChart.data.labels = labels;
            barChart.data.datasets[0].data = tempData;
            barChart.data.datasets[1].data = humidData;
            barChart.data.datasets[2].data = solarData;
            barChart.update();
            lastSelectedCropIndex = null;  // ì „ì²´ ë³´ê¸°ë¡œ ì´ˆê¸°í™”
        });
        filterContainer.appendChild(allButton);

        // ğŸ‘‰ ì‘ë¬¼ë³„ ë²„íŠ¼ ìƒì„±
        labels.forEach((crop, index) => {
            const cropButton = createButton(crop, () => filterChartByCrop(index));
            filterContainer.appendChild(cropButton);
        });

        // ğŸ‘‰ ì‘ë¬¼ í•„í„°ë§ í•¨ìˆ˜
        function filterChartByCrop(cropIndex) {
            lastSelectedCropIndex = cropIndex;

            const cropLabel = labels[cropIndex];
            const cropTemp = tempData[cropIndex];
            const cropHumid = humidData[cropIndex];
            const cropSolar = solarData[cropIndex];

            // ë‘ API ë™ì‹œì— í˜¸ì¶œ
            Promise.all([
                fetch(`/api/weather?region=${selectedRegion}`).then(res => res.json()),
                fetch(`/api/solar?region=${selectedRegion}`).then(res => res.json())
            ])
            .then(([weather, solar]) => {
                // API ì‘ë‹µê°’ íŒŒì‹±
                const realTemp = parseFloat(weather.temp_value);
                const realHumid = parseFloat(weather.humi_value);
                const realSolar = parseFloat(solar.solar_value);

                // ì°¨íŠ¸ ë°ì´í„° ì—…ë°ì´íŠ¸
                barChart.data.labels = [cropLabel, `${selectedRegion} ì‹¤ì‹œê°„`];
                barChart.data.datasets[0].data = [cropTemp, realTemp];
                barChart.data.datasets[1].data = [cropHumid, realHumid];
                barChart.data.datasets[2].data = [cropSolar, realSolar];
                barChart.update();
            })
            .catch(error => console.error("ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:", error));
        }



        // ğŸ‘‰ ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì°¨íŠ¸ ë¦¬ì‚¬ì´ì¦ˆ
        window.addEventListener('resize', () => barChart.resize());
    </script>

    <!-- ê°€ê²© í…Œì´ë¸” -->
    <!-- ê°€ê²© í…Œì´ë¸” -->
    <script>
        // í…Œì´ë¸” í—¤ë” ì˜¤ë¦„ì°¨ìˆœ, ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        document.querySelectorAll(".ranking-table th").forEach(th => {
            th.dataset.order = "asc"; // ê¸°ë³¸ì€ ì˜¤ë¦„ì°¨ìˆœ

            th.addEventListener("click", () => {
                const table = th.closest("table");
                const tbody = table.querySelector("tbody");
                const rows = Array.from(tbody.querySelectorAll("tr"));
                const index = Array.from(th.parentNode.children).indexOf(th);
                const isNumeric = index !== 1; // ìˆ«ìë¡œ ë¹„êµí• ì§€ ì—¬ë¶€ (ë²ˆí˜¸, ì†Œë§¤ê°€ê²©, ë“±ë½ë¥  = ìˆ«ì)

                // í˜„ì¬ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
                const currentOrder = th.dataset.order;
                const newOrder = currentOrder === "asc" ? "desc" : "asc";
                th.dataset.order = newOrder;

                // â–¼â–² ì•„ì´ì½˜ í‘œì‹œ ì´ˆê¸°í™”
                th.parentNode.querySelectorAll("th").forEach(otherTh => {
                    if (otherTh !== th) {
                        otherTh.textContent = otherTh.textContent.replace(/[\u25B2\u25BC]/g, "");
                        otherTh.dataset.order = "asc";
                    }
                });

                // ì•„ì´ì½˜ í‘œì‹œ 
                const arrow = newOrder === "asc" ? " â–¼" : " â–²";
                th.textContent = th.textContent.replace(/[\u25B2\u25BC]/g, "") + arrow;

                const sortedRows = rows.sort((a, b) => {
                    const aText = a.children[index].textContent.trim().replace(/[%(),]/g, "");
                    const bText = b.children[index].textContent.trim().replace(/[%(),]/g, "");

                    if (isNumeric) {
                        const aNum = parseFloat(aText);
                        const bNum = parseFloat(bText);
                        return newOrder === "asc" ? aNum - bNum : bNum - aNum;
                    } else {
                        return newOrder === "asc"
                            ? aText.localeCompare(bText)
                            : bText.localeCompare(aText);
                    }
                });

                // tbody ì •ë ¬ ë°˜ì˜
                tbody.innerHTML = "";
                sortedRows.forEach(row => tbody.appendChild(row));
            });
        });

        // select ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë‹¬ê¸°
        const categoryCache = {};
        document.getElementById("ranking-category-select").addEventListener("change", function() {
            const categoryCode = this.value; // ì„ íƒëœ ê°’
            console.log("categoryCode:", categoryCode);  // ì—¬ê¸° ì°ê¸°

            if (categoryCache[categoryCode]) {
                console.log("í´ë¼ì´ì–¸íŠ¸ ìºì‹œ ì‚¬ìš©");
                renderTable(categoryCache[categoryCode]);
                return;
            }

            fetch("/api/get_ranking_data", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ category_code: categoryCode })
            })
            .then(response => response.json())
            .then(data => {
                categoryCache[categoryCode] = data;
                renderTable(data);
            });
        });

        function renderTable(data) {
            const tbody = document.querySelector(".ranking-table tbody");
            tbody.innerHTML = "";
            data.forEach((row, i) => {
                const price = Number(row.price.replace(/,/g, ""));
                const weekprice = Number(row.weekprice.replace(/,/g, ""));

                let change = "";
                if (price && weekprice) {
                    change = ((price / weekprice - 1) * 100).toFixed(1) + "%";
                } else {
                    change = "-";
                }

                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${i + 1}</td>
                    <td>${row.itemname} (${row.unit})</td>
                    <td>${row.price}ì›</td>
                    <td>${change}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ change ì´ë²¤íŠ¸ë¥¼ ê°•ì œ ë°œìƒ
        document.getElementById("ranking-category-select").dispatchEvent(new Event("change"));
    </script>
    
    <script>
        // dashboardì— ì§€ë„ ì¶”ê°€
        var map = L.map('map').setView([37.47, 126.88], 6);

        L.tileLayer(
                "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                {"attribution": "Data by \u0026copy; \u003ca target=\"_blank\" href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca target=\"_blank\" href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map);;

       const locations = [
        { coords: [37.46569942, 127.089786], name: 'ì„œìš¸íŠ¹ë³„ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.46493908, 127.0884287], name: 'ì„œìš¸íŠ¹ë³„ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„° ìŠ¤ë§ˆíŠ¸ë†ì¥í˜• ì¹˜ìœ ë†ì—…êµìœ¡ì¥' },
        { coords: [37.48334605, 127.0229069], name: 'ëŒ€ë™ KIRO ë¡œë³´í‹±ìŠ¤ì„¼í„°' },
        { coords: [37.60110012, 126.935146], name: 'í…ƒë°­ë³´ê¸‰ì†Œ' },
        { coords: [37.47316698, 126.840239], name: 'ê´‘ëª…í…ƒë°­ë³´ê¸‰ì†Œ' },
        { coords: [37.60110012, 126.935146], name: 'ì‚¬ë‹¨ë²•ì¸ í…ƒë°­ë³´ê¸‰ì†Œ' },
        { coords: [35.2132661, 128.9866578], name: 'ë¶€ì‚°ê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [35.25261404, 129.1950196], name: 'ê¸°ì¥êµ°ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [35.17855047, 128.9564846], name: 'ë¶€ì‚°ì‹œë†ì—…ê¸°ìˆ ì„¼í„° ëŒ€ì €2ì§€ì†Œ' },
        { coords: [35.19890528, 129.0749494], name: 'ë¶€ì‚°ê·€ë†ìš´ë™ë³¸ë¶€' },
        { coords: [35.09773868, 128.9196205], name: 'ëª…ì§€ë†í˜‘ êµ­ì œì‹ ë„ì‹œì§€ì ' },
        { coords: [35.32085717, 129.1894781], name: 'ì–‘ì‚°ê¸°ì¥ì¶•ì‚°ë†í˜‘ ì •ê´€ì‹ ë„ì‹œì§€ì ' },
        { coords: [37.53408708, 126.7446408], name: 'ì¸ì²œê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.7040039, 126.4352806], name: 'ê°•í™”êµ°ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.46014925, 126.6320419], name: 'ì˜¹ì§„êµ°ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.44636153, 126.7080307], name: 'ì¸ì²œë„ì‹œë†ì—…ë„¤íŠ¸ì›Œí¬' },
        { coords: [36.30791127, 127.3063053], name: 'ëŒ€ì „ê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [36.30884558, 127.3074447], name: 'ëŒ€ì „ì‹œë†ì—…ê¸°ìˆ ì„¼í„° ì¼€ì–´íŒœ ë„ì‹œì •ì›' },
        { coords: [36.36918539, 127.35353], name: 'ì¶©ë‚¨ëŒ€í•™êµ ë†ì—…ê³¼í•™ê¸°ìˆ ì„¼í„°' },
        { coords: [36.57264179, 127.2832569], name: 'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [36.5354375, 127.3453161], name: 'ë†ê¸°ê³„ì„ëŒ€ì‚¬ì—…ì†Œ ì¤‘ë¶€ë¶„ì ' },
        { coords: [36.57321084, 127.2819361], name: 'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ ë†ê¸°ê³„ì„ëŒ€ì‚¬ì—…ì†Œ ë³¸ì ' },
        { coords: [37.45900263, 126.9910482], name: 'í•œêµ­ì‚¬ì´ë²„ì›ì˜ˆëŒ€í•™ ê½ƒìˆ²ì¹˜ìœ íŒœ' },
        { coords: [37.45297698, 127.001736], name: 'í•œêµ­ì‚¬ì´ë²„ì›ì˜ˆëŒ€í•™ ë¶€ì„¤ë„ì‹œë†ì—…ì§€ì›ì„¼í„°' },
        { coords: [37.92332042, 127.2260989], name: 'í¬ì²œì‹œë†ì—…ê¸°ìˆ ì„¼í„° ë³¸ì†Œ' },
        { coords: [37.92329511, 127.2252061], name: 'í¬ì²œì‹œë†ì—…ê¸°ìˆ ì„¼í„° ìœ ìš©ë¯¸ìƒë¬¼ë°°ì–‘ì„¼í„°' },
        { coords: [37.99152862, 127.1886499], name: 'í¬ì²œì‹œë†ì—…ê¸°ìˆ ì„¼í„° ì°½ìˆ˜ë†ì—…ì¸ìƒë‹´ì†Œ' },
        { coords: [37.07639758, 126.8728219], name: 'í™”ì„±ì‹œë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.22247021, 127.0428634], name: 'ê²½ê¸°ë„ë†ì—…ê¸°ìˆ ì›' },
        { coords: [35.53729407, 129.311239], name: 'ìš¸ì‚°ê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [37.76121113, 128.876019], name: 'ê°•ì›íŠ¹ë³„ìì¹˜ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [36.57691051, 128.5058727], name: 'ê²½ìƒë¶ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [35.24867869, 128.6579133], name: 'ê²½ìƒë‚¨ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [36.6319897, 127.457292], name: 'ì¶©ì²­ë¶ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [36.66124535, 126.6736907], name: 'ì¶©ì²­ë‚¨ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [33.48901127, 126.4983026], name: 'ì œì£¼íŠ¹ë³„ìì¹˜ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [35.42027213, 127.3898669], name: 'ì „ë¼ë¶ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [34.81608397, 126.4629395], name: 'ì „ë¼ë‚¨ë„ ë†ì—…ê¸°ìˆ ì›' },
        { coords: [35.82322281, 128.7378764], name: 'ëŒ€êµ¬ê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' },
        { coords: [35.1795543, 126.8944389], name: 'ê´‘ì£¼ê´‘ì—­ì‹œ ë†ì—…ê¸°ìˆ ì„¼í„°' }
    ];



        locations.forEach(loc => {
        L.marker(loc.coords).addTo(map)
            .bindPopup(`<b>${loc.name}</b>`);
        });
    </script>
</body>
</html>